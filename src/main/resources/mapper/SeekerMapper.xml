<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.tencent.wxcloudrun.dao.SeekerDao">

    <insert id="setSeeker" parameterType="com.tencent.wxcloudrun.model.po.seeker.SeekerPO">
        insert into seeker(open_id, `name`, avatar, phone, `month`, `year`, gender)
            value (#{openId}, #{name}, #{avatar}, #{phone},
                   #{month}, #{year}, #{gender});
    </insert>

    <insert id="setSeekerIntention">
        insert into seeker_intention(open_id, industry, job, job_type, max_salary, min_salary, salary_type) values
        <foreach collection="list" item="item" index="index" separator=",">
            (#{item.openId}, #{item.industry}, #{item.job},
            #{item.jobType}, #{item.maxSalary}, #{item.minSalary}, #{item.salaryType})
        </foreach>;
    </insert>

    <select id="getSeeker">
        select *
        from seeker
        where open_id = #{openId};
    </select>

    <select id="getOpenId">
        select open_id
        from seeker
        where open_id = #{openId};
    </select>

    <select id="getIntentionById" resultType="com.tencent.wxcloudrun.model.po.seeker.SeekerIntentionPO">
        select *
        from seeker_intention
        where open_id = #{openId};
    </select>

</mapper>